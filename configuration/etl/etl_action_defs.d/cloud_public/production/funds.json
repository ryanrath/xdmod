{
    "table_definition": {
        "$ref": "${table_definition_dir}/cloud_public/production/funds.json#/table_definition"
    },
    "source_query": {
        "records": {
            "id": "sf.id",
            "pi_id": "pi.person_id",
            "funder_id": "f.funder_id",
            "status_id": "fs.fund_status_id",
            "nsf_directorate_id": "nd.nsf_directorate_id",
            "nsf_division_id": "dv.nsf_division_id",
            "title": "sf.title",
            "start_date": "sf.start_date",
            "end_date": "sf.end_date",
            "cash_deposited": "sf.cash_deposited",
            "cash_spend": "sf.cash_spend",
            "cash_balance": "sf.cash_balance",
            "cash_balance_percent": "sf.cash_balance_percent",
            "credit_deposited": "sf.credit_deposited",
            "credit_spend": "sf.credit_spend",
            "credit_balance": "sf.credit_balance",
            "credit_balance_percent": "sf.credit_balance_percent"
        },
        "joins": [
            {
                "name": "staging_funds",
                "schema": "${SOURCE_SCHEMA}",
                "alias": "sf"
            },
            {
                "name": "funders",
                "schema": "${SOURCE_SCHEMA}",
                "alias": "f",
                "on": "f.name = sf.funder"
            },
            {
                "name": "persons",
                "schema": "${SOURCE_SCHEMA}",
                "alias": "pi",
                "on": "pi.id = sf.pi"
            },
            {
                "name": "fund_statuses",
                "schema": "${SOURCE_SCHEMA}",
                "alias": "fs",
                "on": "fs.name = sf.status"
            },
            {
                "name": "nsf_directorates",
                "schema": "${SOURCE_SCHEMA}",
                "alias": "nd",
                "on": "nd.name = sf.nsf_directorate"
            },
            {
                "name": "nsf_divisions",
                "schema": "${SOURCE_SCHEMA}",
                "alias": "dv",
                "on": "dv.name = sf.nsf_division"
            }
        ]
    }
}
